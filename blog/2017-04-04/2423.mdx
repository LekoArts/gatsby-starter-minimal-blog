---
date: '2017-04-04'
title: Opening up cyberspace with Matrix and WebVR!
categories:
  - General
---

<span style="font-weight: 400;">TL;DR: </span><a href="https://matrix.org/vrdemo"><span style="font-weight: 400;">here's the demo</span></a><span style="font-weight: 400;">!</span>

<span style="font-weight: 400;">Hi everyone,</span>

<span style="font-weight: 400;">Today is a special day, the sort of day where you take a big step towards an ultimate dream. Starting Matrix and seeing it gaining momentum is already huge for us, a once in a lifetime opportunity. But one of the crazier things which drove us to create Matrix is the dream of creating cyberspace; the legendary promised land of the internet.</span>

<span style="font-weight: 400;">Whether it's the Matrix of </span><a href="https://en.wikipedia.org/wiki/Neuromancer"><span style="font-weight: 400;">Neuromancer</span></a><span style="font-weight: 400;">, the </span><a href="https://en.wikipedia.org/wiki/Metaverse"><span style="font-weight: 400;">Metaverse</span></a><span style="font-weight: 400;"> of </span><a href="https://en.wikipedia.org/wiki/Snow_Crash"><span style="font-weight: 400;">Snow Crash</span></a><span style="font-weight: 400;"> or the Other Plane of </span><a href="https://en.wikipedia.org/wiki/True_Names"><span style="font-weight: 400;">True Names</span></a><span style="font-weight: 400;">, an immersive 3D environment where people can meet from around the world to communicate, create and share is the ultimate expression of the Internet's potential as a way to connect: the idea of an open, neutral, decentralised virtual reality within the 'net</span><b>.</b>

<span style="font-weight: 400;">This is essentially the software developer equivalent of lying on your back at night, looking up at the stars, and wondering if you'll ever fly among them... and Matrix is not alone in dreaming of this!  There have been many walled-garden virtual worlds over the years - </span><a href="http://secondlife.com/"><span style="font-weight: 400;">Second Life</span></a><span style="font-weight: 400;">, </span><a href="http://habbo.com"><span style="font-weight: 400;">Habbo Hotel</span></a><span style="font-weight: 400;">, all of the </span><a href="http://www.mmorpg.com/games-list"><span style="font-weight: 400;">MMORPGs</span></a><span style="font-weight: 400;">, </span><a href="https://www.sansar.com/"><span style="font-weight: 400;">Project Sansar</span></a><span style="font-weight: 400;"> etc.  And there have been decentralised worlds which lack the graphics but share the vision - whether it's </span><a href="https://en.wikipedia.org/wiki/FidoNet"><span style="font-weight: 400;">FidoNet</span></a><span style="font-weight: 400;">, </span><a href="https://en.wikipedia.org/wiki/Usenet"><span style="font-weight: 400;">Usenet</span></a><span style="font-weight: 400;">, </span><a href="https://en.wikipedia.org/wiki/Internet_Relay_Chat"><span style="font-weight: 400;">IRC</span></a><span style="font-weight: 400;"> servers, </span><a href="http://xmpp.org/"><span style="font-weight: 400;">XMPP</span></a><span style="font-weight: 400;">, the </span><a href="https://en.wikipedia.org/wiki/Blogosphere"><span style="font-weight: 400;">blogosphere</span></a><span style="font-weight: 400;"> or Matrix as it's used today.  And there are a few ambitious projects like </span><a href="https://en.wikipedia.org/wiki/Croquet_Project"><span style="font-weight: 400;">Croquet</span></a><span style="font-weight: 400;">/</span><a href="http://www.opencobalt.net/"><span style="font-weight: 400;">OpenCobalt</span></a><span style="font-weight: 400;">, </span><a href="http://opensimulator.org/"><span style="font-weight: 400;">Open Simulator</span></a><span style="font-weight: 400;">, </span><a href="http://www.janusvr.com"><span style="font-weight: 400;">JanusVR</span></a><span style="font-weight: 400;"> or </span><a href="http://highfidelity.com"><span style="font-weight: 400;">High Fidelity</span></a><span style="font-weight: 400;"> which aim for a decentralised cyberspace, albeit without defining an open standard.</span>

<span style="font-weight: 400;">But despite all this activity, where is the open cyberspace? Where is the universal fabric which could weave these worlds together?  Where is the VR equivalent of The Web itself?  Where is the neutral communication layer that could connect the galaxies of different apps and users into a coherent reality?  How do you bridge between today's traditional web apps and their VR equivalents?</span>

<span style="font-weight: 400;">Aside from cultural ones, we believe there are three missing ingredients which have been technically holding back the development of an open cyberspace so far:</span>
<ol>
 	<li><span style="font-weight: 400;"> The hardware</span></li>
 	<li><span style="font-weight: 400;"> Client software support (i.e. apps)</span></li>
 	<li><span style="font-weight: 400;"> A universal real-time data layer to store the space</span></li>
</ol>
<span style="font-weight: 400;">Nowadays the hardware problem is effectively solved: the </span><a href="https://www.vive.com"><span style="font-weight: 400;">HTC Vive</span></a><span style="font-weight: 400;">, </span><a href="https://www.oculus.com/"><span style="font-weight: 400;">Oculus Rift</span></a><span style="font-weight: 400;"> and even </span><a href="https://vr.google.com/cardboard/"><span style="font-weight: 400;">Google Cardboard</span></a><span style="font-weight: 400;"> have brought VR displays to the general public.  Meanwhile, accelerometers and head-tracking turn normal screens into displays for immersive content without even needing goggles, giving </span><i><span style="font-weight: 400;">everyone</span></i><span style="font-weight: 400;"> a window into a virtual world.</span>

<span style="font-weight: 400;">Client software is a more interesting story:  If there are many custom and proprietary VR apps that already exist out there, almost none of them can connect to other servers than the ones ran by their own vendors, or even other services and apps.   An open neutral cyberspace is just like the web: it needs the equivalent of web browsers, i.e. ubiquitous client apps which can connect to any servers and services written by any vendors and hosted by any providers, communicating together via an open common language.   And while web browsers of course exist, until very recently there was no way to link them into VR hardware.</span>

<span style="font-weight: 400;">This has changed with the creation of </span><a href="https://en.wikipedia.org/wiki/WebVR"><span style="font-weight: 400;">WebVR</span></a><span style="font-weight: 400;"> by Mozilla - defining an API to let browsers render VR content, gracefully degrading across hardware and platforms such that you get the best possible experience all the way from a top-end gaming PC + Vive, down to tapping on a link on a simple smartphone.  WebVR is a genuine revolution: suddenly every webapp on the planet can create a virtual world! And frameworks like </span><a href="https://aframe.io/"><span style="font-weight: 400;">A-Frame</span></a><span style="font-weight: 400;">, </span><a href="https://github.com/ngokevin/aframe-react"><span style="font-weight: 400;">aframe-react</span></a><span style="font-weight: 400;"> and </span><a href="https://facebookincubator.github.io/react-vr/"><span style="font-weight: 400;">React VR</span></a><span style="font-weight: 400;"> make it incredibly easy and fun to do.</span>

<span style="font-weight: 400;">So looking back at our list, the final missing piece is nothing less than a backbone: some kind of data layer to link these apps together.  Right now, </span><b>all</b><span style="font-weight: 400;"> the WebVR apps out there are little islands - each its own isolated walled garden and there is no standard way to provide shared experiences.  There is no standard way for users to communicate between these worlds (or between the VR and non-VR web) - be that by messaging, VoIP, Video or even VR interactions.  There is no standard way to define an avatar, its location and movement within a world, or how it might travel between worlds.  And finally, there is no standard way to describe the world's state in general: each webapp is free to manage its scene and its content any way it likes; there is nowhere to expose the realtime scene-graph of the world such that other avatars, bots, apps, services etc. can interact with it. The same way there is no standard way to exchange messages or reuse a user profile between messaging apps today: if the cyberspace is taking shape as we speak, it is definitely not taking the path of openness. At least not yet.</span>

<span style="font-weight: 400;">Predictably enough, it's this last point of the 'missing data layer for cyberspace' which we've been thinking about with Matrix: an open, neutral, decentralised meta-network powering or connecting these worlds.  To start with, we've made Matrix available as a generic communications layer for VR, taking WebVR (via A-Frame) and combining it with </span><a href="https://github.com/matrix-org/matrix-js-sdk"><span style="font-weight: 400;">matrix-js-sdk</span><span style="font-weight: 400;">, </span></a><span style="font-weight: 400;">as an open, secure and decentralised way to place voip calls, video calls and instant messaging both within and between WebVR apps and the rest of the existing Matrix ecosystem (e.g. apps like Riot).</span>

<span style="font-weight: 400;">In fact, the best way is to test it live: we've put together a quick demo at </span><a href="https://matrix.org/vrdemo"><span style="font-weight: 400;">https://matrix.org/vrdemo</span></a><span style="font-weight: 400;"> to show it off, so please <a href="https://matrix.org/vrdemo">give it a go!</a></span>

&nbsp;

<a href="https://matrix.org/vrdemo"><img class="aligncenter size-large wp-image-2424" src="https://matrix.org/blog/wp-content/uploads/2017/04/table-1024x333.jpg" alt="" width="1024" height="333" /></a>

&nbsp;

<span style="font-weight: 400;"><a href="https://matrix.org/vrdemo">In the demo</a> you get:</span>
<ol>
 	<li><span style="font-weight: 400;"> a virtual lobby, providing a 1:1 WebRTC video call via Matrix through to a ‘guide' user of your choice anywhere else in Matrix (VR or not).  From the lobby you can jump into two other apps:</span></li>
 	<li><span style="font-weight: 400;"> a video conference, calling between all the participants of a given Matrix room in VR (no interop yet with other Matrix apps)</span></li>
 	<li><span style="font-weight: 400;"> a 'virtual tourism' example, featuring a 1:1 WebRTC video call with a guide, superimposed over the top of the user going skiing through 360 degree video footage.</span></li>
</ol>
<span style="font-weight: 400;">Video calling requires a WebRTC-capable browser (Chrome or Firefox). Unfortunately no iOS browsers support it yet. If you have dedicated VR hardware (Vive or Rift), you'll have to configure your browser appropriately to use the demo - see </span><a href="https://webvr.rocks"><span style="font-weight: 400;">https://webvr.rocks</span></a><span style="font-weight: 400;"> for the latest details.</span>

<span style="font-weight: 400;">Needless to say, the demo's open sourced under the Apache License like all things Matrix - you can check out the code from </span><a href="https://github.com/matrix-org/matrix-vr-demo"><span style="font-weight: 400;">https://github.com/matrix-org/matrix-vr-demo</span></a><span style="font-weight: 400;">.  Huge kudos to Richard Lewis, Rob Swain and Ben Lewis for building this out - and to Aidan Taub and Tom Elliott for providing the 360 degree video footage!</span>

<span style="font-weight: 400;">The demo is quite high-bandwidth and hardware intensive, so here's a video of it in action, just in case:</span>

&nbsp;

<div style="text-align: center;"><iframe src="https://www.youtube.com/embed/nk0nMlVXkbk" width="560" height="315" frameborder="0" allowfullscreen="allowfullscreen"></iframe></div>

&nbsp;

<span style="font-weight: 400;">Now, it's important to understand that here we're using Matrix as a standard communications API for VR, but we're not using Matrix to store any VR world data (yet).  The demo uses plain A-Frame via aframe-react to render its world: we are not providing an API which exposes the world itself onto the network for folks to interact with and extend.  This is because Matrix is currently optimised for storing and synchronising two types of data structure: decentralised timelines of conversation data, and arbitrary decentralised key-value data (e.g. room names, membership, topics).</span>

<span style="font-weight: 400;">However, the job of storing arbitrary world data requires storing and flexibly querying it as an object graph of some kind - e.g. as a scene graph hierarchy.  Doing this efficiently whilst supporting Matrix's decentralised eventual consistency model is tantamount to evolving Matrix into being a generic decentralised object-graph database (whilst upholding the constraints of that virtual world).  This is tractable, but it's a bunch more work than just supporting the eventually-consistent timeline &amp; key-value store we have today.  It's something we're thinking about though. :)</span>

<span style="font-weight: 400;">Also, Matrix is currently not super low-latency - on a typical busy Synapse deployment event transmission between clients has a latency of 50-200ms (ignoring network).  This is fine for instant messaging and setting up VoIP calls etc, but useless for publishing the realtime state of a virtual world: having to wait 200ms to be told that something happened in an interactive virtual world would be a terrible experience.  However, there are various fixes we can do here: Matrix itself is getting faster; Dendrite is expected to be one or two orders of magnitude faster than Synapse.  We could also use Matrix simply as a signalling layer in order to negotiate a lower latency realtime protocol to describe world data updates (much as we use Matrix as a signalling layer for setting up RTP streams for VoIP calls or MIDI sessions).</span>

<span style="font-weight: 400;">Finally, you need somewhere to store the world assets themselves (textures, sounds, Collada or GLTF assets, etc).  This is no different to using attachments in Matrix today - this could be as plain HTTP, or via the Matrix decentralised content store (mxc:// URLs), or via something like IPFS.</span>

<span style="font-weight: 400;">This said, it's only a matter of time before someone starts storing world data itself in Matrix.  We have more work to do before it's a tight fit, but this has always been one of the long-term goals of the project and we're going to do everything we can to support it well.</span>

<span style="font-weight: 400;">So: this is the future we're thinking of.  Obviously work on today's Matrix servers, clients, spec &amp; bridges is our focus and priority right now and we lots of work left there - but the longer term plan is critical too.  Communication in VR is pretty much a blank canvas right now, and Matrix can be <em>the</em> connecting fabric for it - which is unbelievably exciting.  Right now our demo is just a PoC - we'd encourage all devs reading this to have a think about how to extend it, and how we all can build together the new frontier of cyberspace!</span>

<span style="font-weight: 400;">Finally, if you're interested in chatting more about VR on Matrix, come hang out over at </span><a href="https://matrix.to/#/#vr:matrix.org"><span style="font-weight: 400;">#vr:matrix.org</span></a><span style="font-weight: 400;">!</span>

<span style="font-weight: 400;">- Matthew, Amandine &amp; the Matrix team</span>

<div style="text-align: center;">
<div style="display: inline-block;">
<blockquote class="twitter-tweet" data-lang="en">
<p dir="ltr" lang="en">Amandine grins at the future in the newest skunkworks zone of the London <a href="https://t.co/y2YCHNIbgU">https://t.co/y2YCHNIbgU</a> HQ... :&gt; :D ? <a href="https://t.co/K5xBz7U9o2">pic.twitter.com/K5xBz7U9o2</a></p>
— Matrix (@matrixdotorg) <a href="https://twitter.com/matrixdotorg/status/843181984448991232">March 18, 2017</a></blockquote>
</div>
</div>
<script async src="//platform.twitter.com/widgets.js" charset="utf-8"></script>